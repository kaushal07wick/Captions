[build]
builder = "Dockerfile"

[deploy]
# Run the FastAPI server via Uvicorn (matches your Dockerfile)
startCommand = "uvicorn api.index:app --host 0.0.0.0 --port $PORT"

# Railway auto-injects $PORT, fallback for local builds
envs = { PORT = "8000" }

# Health check endpoint
healthcheckPath = "/"
healthcheckTimeout = 120

# Deployment control
numReplicas = 1
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3
